# README: Python based scripts for summarising each chapter of an EPUB ebook using OpenAI's API

This repository contains a collection of Python scripts designed to facilitate the generation of chatper summaries of EPUB ebooks. epub_to_txt_chapter_splitter.py splits the EPUB ebook into separate TXT files by chapter. openai_token_usage_estimator.py estimates the OpenAI API token usage for processing these files. openai_book_chapter_summarizer.py then feeds the chapters in one by one and records the summary into one .md output file. 

Below is a detailed overview of each script and its functionality.

## 1. Epub to TXT Chapter Splitter

**Script Filename**: `epub_to_txt_chapter_splitter.py`

### Description
This script is designed to convert EPUB files into individual plain text files, one for each chapter. It utilizes the `ebooklib` library to read EPUB files and `BeautifulSoup` for HTML content parsing to extract text efficiently.

### Features
- Automatically finds and processes all `.epub` files in the current directory.
- Extracts text content from each chapter of an EPUB file.
- Saves each chapter as a separate `.txt` file, named according to its chapter number and the original EPUB filename.

### Usage
Simply run the script in a directory containing your EPUB files. It will generate text files for each chapter of each EPUB file found.

## 2. OpenAI Token Usage Estimator

**Script Filename**: `openai_token_usage_estimator.py`

### Description
This script estimates the cost of using OpenAI's API to process a set of text files, based on the number of tokens generated by both the input (instructions and file content) and the fixed output token count per response.

### Features
- Estimates the number of tokens for both input and output based on file content and predefined instructions.This uses current input/output pricing as of Feb2024.
- Calculates the estimated cost using OpenAI's pricing model.
- Supports processing of multiple `.txt` files in a specified directory.

### Usage
Update the `directory_path` variable to point to the directory containing your text files, then run the script. It will output the total estimated input and output tokens, along with the total estimated cost.

## 3. OpenAI Book Chapter Summarizer

**Script Filename**: `openai_book_chapter_summarizer.py`

### Description
This script utilizes OpenAI's API to generate summaries for book chapters provided as text files. It prepends a set of instructions to each file content to guide the generation of summaries focusing on actionable advice and unique insights.

### Features
- Processes `.txt` files, skipping files with less than 150 words. This prevents the AI from attempting to summarise short chapters which often contain only a section heading or a short quote.
- Generates summaries using OpenAI's GPT-4 model, with a focus on distilling actionable advice from book chapters.
- Saves summaries in a Markdown file, along with the total token usage for the entire processing session.

### Usage
Set your OpenAI API key in the script, specify the directory containing your text files, and run the script. It will process each file, generate summaries, and compile them into a single Markdown file.

---

**Note**: Before using the OpenAI-related scripts, ensure you have a valid OpenAI API key and have installed the necessary Python libraries (`openai`, `ebooklib`, `bs4`). The `epub_to_txt_chapter_splitter.py` script requires no external API keys but does depend on specific libraries for EPUB processing and HTML parsing.
